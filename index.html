<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é æŠ•ã®æ—… - Google Mapsç‰ˆ</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">ğŸ€ é æŠ•ã®æ—… - Google Mapsç‰ˆ</h1>
            <button class="header-btn" id="startBtn" onclick="startApp()">
                ä½ç½®æƒ…å ±ã¨ã‚»ãƒ³ã‚µãƒ¼ã‚’æœ‰åŠ¹ã«ã™ã‚‹
            </button>
        </div>
        
        <div id="loading" class="loading" style="display: none;">
            <div>åœ°å›³ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
            <div style="margin-top: 10px; font-size: 14px;">å°‘ã€…ãŠå¾…ã¡ãã ã•ã„</div>
        </div>
        
        <div class="map-container">
            <div id="map"></div>
            <canvas id="gameCanvas"></canvas>
        </div>
        
        <div class="ball" id="ball"></div>
        
        <div class="power-meter" id="powerMeter">
            <div class="power-fill" id="powerFill"></div>
        </div>
        
        <div class="compass">
            <div class="compass-inner">
                <div class="compass-labels">
                    <div class="compass-n">N</div>
                    <div class="compass-e">E</div>
                    <div class="compass-s">S</div>
                    <div class="compass-w">W</div>
                </div>
                <div class="compass-needle" id="compassNeedle"></div>
                <div class="compass-center"></div>
            </div>
        </div>
        
        <div class="info-panel" id="infoPanel">
            <div class="status" id="status">ä½ç½®æƒ…å ±ã¨ãƒ‡ãƒã‚¤ã‚¹ã‚»ãƒ³ã‚µãƒ¼ã®è¨±å¯ãŒå¿…è¦ã§ã™</div>
            
            <div class="info-row">
                <span>ğŸ§­ æ–¹è§’:</span>
                <span id="heading">---Â°</span>
            </div>
            <div class="info-row">
                <span>ğŸ“ æ–¹ä½:</span>
                <span id="compass">---</span>
            </div>
            <div class="info-row">
                <span>ğŸ“ å‚¾ã:</span>
                <span id="tilt">---Â°</span>
            </div>
            <div class="info-row">
                <span>ğŸ’¨ æŒ¯ã‚Š:</span>
                <span id="speed">---</span>
            </div>
            <div class="info-row">
                <span>ğŸ“ è·é›¢:</span>
                <span id="distance">0m</span>
            </div>
            <div class="info-row">
                <span>ğŸŒ åº§æ¨™:</span>
                <span id="coordinates">---</span>
            </div>
        </div>

        <div class="landing-panel" id="landingPanel">
            <div class="results" id="results">ğŸ¯ ç€åœ°å®Œäº†ï¼</div>
            <a href="#" class="google-map-btn" id="googleMapBtn" target="_blank">
                ğŸ“ Googleãƒãƒƒãƒ—ã§é–‹ã
            </a>
            <button class="header-btn" id="resetBtn" style="margin-top: 15px;">
                ğŸ”„ ã‚‚ã†ä¸€åº¦æŠ•çƒã™ã‚‹
            </button>
        </div>
    </div>

    <script>
        // ãƒ‡ãƒãƒƒã‚°ç”¨: ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ç¢ºèª
        function startApp() {
            console.log('ğŸ¯ startApp function called');
            alert('startAppé–¢æ•°ãŒå‘¼ã°ã‚Œã¾ã—ãŸï¼'); // ãƒ‡ãƒãƒƒã‚°ç”¨ã‚¢ãƒ©ãƒ¼ãƒˆ
            
            if (typeof app !== 'undefined' && app && typeof app.startApp === 'function') {
                console.log('âœ… App instance found, calling startApp');
                app.startApp();
            } else {
                console.error('âŒ App instance not ready');
                alert('App instance not ready'); // ãƒ‡ãƒãƒƒã‚°ç”¨
                
                // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: æ–°ã—ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ
                if (typeof BallThrowJourneyApp !== 'undefined') {
                    console.log('ğŸ”„ Creating new app instance');
                    window.app = new BallThrowJourneyApp();
                    setTimeout(() => {
                        if (window.app && window.app.startApp) {
                            window.app.startApp();
                        }
                    }, 1000);
                } else {
                    alert('BallThrowJourneyApp class not found!');
                }
            }
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿ç¢ºèª
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ DOM loaded');
            
            const startBtn = document.getElementById('startBtn');
            if (startBtn) {
                console.log('âœ… Start button found');
                
                // è¿½åŠ ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚‚è¨­å®š
                startBtn.addEventListener('click', function(e) {
                    console.log('ğŸ“± Button clicked via addEventListener');
                });
                
            } else {
                console.error('âŒ Start button not found');
                alert('Start button not found!');
            }
        });
    </script>
    <script src="app.js"></script>
</body>
</html>